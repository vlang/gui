module markdown

// emoji.v provides emoji shortcode lookup for markdown.
// Supports GitHub-standard shortcodes: :name: -> Unicode emoji.

// emoji_lookup returns the Unicode emoji for a shortcode name,
// or empty string if not found.
pub fn emoji_lookup(name string) string {
	return emoji_map[name] or { '' }
}

// find_emoji_end scans from start for valid emoji shortcode chars.
// Returns end position of name (before closing ':') or -1.
// Max 50 chars scanned. Valid chars: a-z, A-Z, 0-9, _, +, -.
// First char must be alpha, underscore, + or -.
pub fn find_emoji_end(text string, start int) int {
	if start >= text.len {
		return -1
	}
	// First char: alpha, underscore, + or -
	fc := text[start]
	if !((fc >= `a` && fc <= `z`) || (fc >= `A` && fc <= `Z`) || fc == `_` || fc == `+` || fc == `-`) {
		return -1
	}
	mut i := start + 1
	limit := if start + 50 < text.len { start + 50 } else { text.len }
	for i < limit {
		ch := text[i]
		if ch == `:` {
			return i
		}
		if (ch >= `a` && ch <= `z`) || (ch >= `A` && ch <= `Z`)
			|| (ch >= `0` && ch <= `9`) || ch == `_` || ch == `+` || ch == `-` {
			i++
			continue
		}
		return -1 // invalid char
	}
	return -1
}

// emoji_map maps GitHub-standard shortcode names to Unicode emoji.
const emoji_map = {
	// Smileys & Emotion
	'smile':                        'ðŸ˜„'
	'laughing':                     'ðŸ˜†'
	'blush':                        'ðŸ˜Š'
	'smiley':                       'ðŸ˜ƒ'
	'grinning':                     'ðŸ˜€'
	'grin':                         'ðŸ˜'
	'joy':                          'ðŸ˜‚'
	'rofl':                         'ðŸ¤£'
	'sweat_smile':                  'ðŸ˜…'
	'wink':                         'ðŸ˜‰'
	'kissing_heart':                'ðŸ˜˜'
	'yum':                          'ðŸ˜‹'
	'stuck_out_tongue':             'ðŸ˜›'
	'stuck_out_tongue_winking_eye': 'ðŸ˜œ'
	'stuck_out_tongue_closed_eyes': 'ðŸ˜'
	'sunglasses':                   'ðŸ˜Ž'
	'heart_eyes':                   'ðŸ˜'
	'thinking':                     'ðŸ¤”'
	'neutral_face':                 'ðŸ˜'
	'expressionless':               'ðŸ˜‘'
	'unamused':                     'ðŸ˜’'
	'sweat':                        'ðŸ˜“'
	'pensive':                      'ðŸ˜”'
	'confused':                     'ðŸ˜•'
	'confounded':                   'ðŸ˜–'
	'disappointed':                 'ðŸ˜ž'
	'worried':                      'ðŸ˜Ÿ'
	'angry':                        'ðŸ˜ '
	'rage':                         'ðŸ˜¡'
	'cry':                          'ðŸ˜¢'
	'sob':                          'ðŸ˜­'
	'fearful':                      'ðŸ˜¨'
	'scream':                       'ðŸ˜±'
	'tired_face':                   'ðŸ˜«'
	'sleeping':                     'ðŸ˜´'
	'sleepy':                       'ðŸ˜ª'
	'mask':                         'ðŸ˜·'
	'nerd_face':                    'ðŸ¤“'
	'cowboy_hat_face':              'ðŸ¤ '
	'clown_face':                   'ðŸ¤¡'
	'nauseated_face':               'ðŸ¤¢'
	'rolling_eyes':                 'ðŸ™„'
	'hushed':                       'ðŸ˜¯'
	'frowning':                     'ðŸ˜¦'
	'anguished':                    'ðŸ˜§'
	'imp':                          'ðŸ‘¿'
	'smiling_imp':                  'ðŸ˜ˆ'
	'skull':                        'ðŸ’€'
	'ghost':                        'ðŸ‘»'
	'alien':                        'ðŸ‘¾'
	'robot':                        'ðŸ¤–'
	'poop':                         'ðŸ’©'
	'hankey':                       'ðŸ’©'
	'clap':                         'ðŸ‘'
	'wave':                         'ðŸ‘‹'
	'raised_hands':                 'ðŸ™Œ'
	'pray':                         'ðŸ™'
	'handshake':                    'ðŸ¤'
	'muscle':                       'ðŸ’ª'
	'point_up':                     'â˜ï¸'
	'point_down':                   'ðŸ‘‡'
	'point_left':                   'ðŸ‘ˆ'
	'point_right':                  'ðŸ‘‰'
	'middle_finger':                'ðŸ–•'
	'raised_hand':                  'âœ‹'
	'ok_hand':                      'ðŸ‘Œ'
	'thumbsup':                     'ðŸ‘'
	'thumbsdown':                   'ðŸ‘Ž'
	'fist':                         'âœŠ'
	'punch':                        'ðŸ‘Š'
	'v':                            'âœŒï¸'
	'crossed_fingers':              'ðŸ¤ž'
	'metal':                        'ðŸ¤˜'
	'eyes':                         'ðŸ‘€'
	'tongue':                       'ðŸ‘…'
	'lips':                         'ðŸ‘„'
	// Hearts & Symbols
	'heart':                        'â¤ï¸'
	'yellow_heart':                 'ðŸ’›'
	'green_heart':                  'ðŸ’š'
	'blue_heart':                   'ðŸ’™'
	'purple_heart':                 'ðŸ’œ'
	'black_heart':                  'ðŸ–¤'
	'broken_heart':                 'ðŸ’”'
	'heartbeat':                    'ðŸ’“'
	'heartpulse':                   'ðŸ’—'
	'sparkling_heart':              'ðŸ’–'
	'cupid':                        'ðŸ’˜'
	'gift_heart':                   'ðŸ’'
	'heart_decoration':             'ðŸ’Ÿ'
	'sparkles':                     'âœ¨'
	'star':                         'â­'
	'star2':                        'ðŸŒŸ'
	'dizzy':                        'ðŸ’«'
	'boom':                         'ðŸ’¥'
	'fire':                         'ðŸ”¥'
	'droplet':                      'ðŸ’§'
	'100':                          'ðŸ’¯'
	'zap':                          'âš¡'
	'snowflake':                    'â„ï¸'
	'rainbow':                      'ðŸŒˆ'
	'sun_with_face':                'ðŸŒž'
	'cloud':                        'â˜ï¸'
	'umbrella':                     'â˜‚ï¸'
	// People
	'baby':                         'ðŸ‘¶'
	'boy':                          'ðŸ‘¦'
	'girl':                         'ðŸ‘§'
	'man':                          'ðŸ‘¨'
	'woman':                        'ðŸ‘©'
	'older_man':                    'ðŸ‘´'
	'older_woman':                  'ðŸ‘µ'
	// Animals
	'dog':                          'ðŸ¶'
	'cat':                          'ðŸ±'
	'mouse':                        'ðŸ­'
	'hamster':                      'ðŸ¹'
	'rabbit':                       'ðŸ°'
	'fox_face':                     'ðŸ¦Š'
	'bear':                         'ðŸ»'
	'panda_face':                   'ðŸ¼'
	'koala':                        'ðŸ¨'
	'tiger':                        'ðŸ¯'
	'lion':                         'ðŸ¦'
	'cow':                          'ðŸ®'
	'pig':                          'ðŸ·'
	'frog':                         'ðŸ¸'
	'monkey_face':                  'ðŸµ'
	'see_no_evil':                  'ðŸ™ˆ'
	'hear_no_evil':                 'ðŸ™‰'
	'speak_no_evil':                'ðŸ™Š'
	'chicken':                      'ðŸ”'
	'penguin':                      'ðŸ§'
	'bird':                         'ðŸ¦'
	'eagle':                        'ðŸ¦…'
	'butterfly':                    'ðŸ¦‹'
	'bug':                          'ðŸ›'
	'snail':                        'ðŸŒ'
	'snake':                        'ðŸ'
	'turtle':                       'ðŸ¢'
	'octopus':                      'ðŸ™'
	'whale':                        'ðŸ³'
	'dolphin':                      'ðŸ¬'
	'fish':                         'ðŸŸ'
	'unicorn':                      'ðŸ¦„'
	'bee':                          'ðŸ'
	'crab':                         'ðŸ¦€'
	// Food & Drink
	'apple':                        'ðŸŽ'
	'green_apple':                  'ðŸ'
	'banana':                       'ðŸŒ'
	'grapes':                       'ðŸ‡'
	'watermelon':                   'ðŸ‰'
	'strawberry':                   'ðŸ“'
	'peach':                        'ðŸ‘'
	'cherries':                     'ðŸ’'
	'pineapple':                    'ðŸ'
	'lemon':                        'ðŸ‹'
	'avocado':                      'ðŸ¥‘'
	'pizza':                        'ðŸ•'
	'hamburger':                    'ðŸ”'
	'fries':                        'ðŸŸ'
	'hotdog':                       'ðŸŒ­'
	'taco':                         'ðŸŒ®'
	'burrito':                      'ðŸŒ¯'
	'egg':                          'ðŸ¥š'
	'coffee':                       'â˜•'
	'tea':                          'ðŸµ'
	'beer':                         'ðŸº'
	'wine_glass':                   'ðŸ·'
	'cocktail':                     'ðŸ¸'
	'cake':                         'ðŸ°'
	'cookie':                       'ðŸª'
	'chocolate_bar':                'ðŸ«'
	'candy':                        'ðŸ¬'
	'ice_cream':                    'ðŸ¨'
	'doughnut':                     'ðŸ©'
	// Objects
	'computer':                     'ðŸ’»'
	'keyboard':                     'âŒ¨ï¸'
	'phone':                        'â˜Žï¸'
	'iphone':                       'ðŸ“±'
	'envelope':                     'âœ‰ï¸'
	'email':                        'ðŸ“§'
	'inbox_tray':                   'ðŸ“¥'
	'outbox_tray':                  'ðŸ“¤'
	'package':                      'ðŸ“¦'
	'memo':                         'ðŸ“'
	'pencil2':                      'âœï¸'
	'book':                         'ðŸ“–'
	'books':                        'ðŸ“š'
	'bookmark':                     'ðŸ”–'
	'link':                         'ðŸ”—'
	'paperclip':                    'ðŸ“Ž'
	'scissors':                     'âœ‚ï¸'
	'lock':                         'ðŸ”’'
	'unlock':                       'ðŸ”“'
	'key':                          'ðŸ”‘'
	'hammer':                       'ðŸ”¨'
	'wrench':                       'ðŸ”§'
	'gear':                         'âš™ï¸'
	'bulb':                         'ðŸ’¡'
	'flashlight':                   'ðŸ”¦'
	'battery':                      'ðŸ”‹'
	'mag':                          'ðŸ”'
	'mag_right':                    'ðŸ”Ž'
	'bell':                         'ðŸ””'
	'no_bell':                      'ðŸ”•'
	'loudspeaker':                  'ðŸ“¢'
	'mega':                         'ðŸ“£'
	'mute':                         'ðŸ”‡'
	'speaker':                      'ðŸ”ˆ'
	'sound':                        'ðŸ”‰'
	'loud_sound':                   'ðŸ”Š'
	'hourglass':                    'âŒ›'
	'alarm_clock':                  'â°'
	'watch':                        'âŒš'
	'calendar':                     'ðŸ“…'
	'chart':                        'ðŸ“ˆ'
	'chart_with_downwards_trend':   'ðŸ“‰'
	'bar_chart':                    'ðŸ“Š'
	'clipboard':                    'ðŸ“‹'
	'pushpin':                      'ðŸ“Œ'
	'round_pushpin':                'ðŸ“'
	'triangular_flag_on_post':      'ðŸš©'
	'trophy':                       'ðŸ†'
	'medal_sports':                 'ðŸ…'
	'1st_place_medal':              'ðŸ¥‡'
	'2nd_place_medal':              'ðŸ¥ˆ'
	'3rd_place_medal':              'ðŸ¥‰'
	'crown':                        'ðŸ‘‘'
	'gem':                          'ðŸ’Ž'
	'moneybag':                     'ðŸ’°'
	'dollar':                       'ðŸ’µ'
	'credit_card':                  'ðŸ’³'
	'gift':                         'ðŸŽ'
	'balloon':                      'ðŸŽˆ'
	'tada':                         'ðŸŽ‰'
	'confetti_ball':                'ðŸŽŠ'
	'rocket':                       'ðŸš€'
	'airplane':                     'âœˆï¸'
	'car':                          'ðŸš—'
	'bus':                          'ðŸšŒ'
	'train':                        'ðŸš†'
	'bike':                         'ðŸš²'
	'ship':                         'ðŸš¢'
	'anchor':                       'âš“'
	'earth_americas':               'ðŸŒŽ'
	'earth_africa':                 'ðŸŒ'
	'earth_asia':                   'ðŸŒ'
	'globe_with_meridians':         'ðŸŒ'
	'house':                        'ðŸ '
	'office':                       'ðŸ¢'
	'hospital':                     'ðŸ¥'
	'school':                       'ðŸ«'
	// Symbols & Signs
	'white_check_mark':             'âœ…'
	'ballot_box_with_check':        'â˜‘ï¸'
	'heavy_check_mark':             'âœ”ï¸'
	'x':                            'âŒ'
	'negative_squared_cross_mark':  'âŽ'
	'bangbang':                     'â€¼ï¸'
	'interrobang':                  'â‰ï¸'
	'question':                     'â“'
	'grey_question':                'â”'
	'grey_exclamation':             'â•'
	'exclamation':                  'â—'
	'warning':                      'âš ï¸'
	'no_entry':                     'â›”'
	'no_entry_sign':                'ðŸš«'
	'stop_sign':                    'ðŸ›‘'
	'construction':                 'ðŸš§'
	'recycle':                      'â™»ï¸'
	'information_source':           'â„¹ï¸'
	'sos':                          'ðŸ†˜'
	'new':                          'ðŸ†•'
	'up':                           'ðŸ†™'
	'cool':                         'ðŸ†’'
	'free':                         'ðŸ†“'
	'ok':                           'ðŸ†—'
	'arrow_up':                     'â¬†ï¸'
	'arrow_down':                   'â¬‡ï¸'
	'arrow_left':                   'â¬…ï¸'
	'arrow_right':                  'âž¡ï¸'
	'arrow_upper_right':            'â†—ï¸'
	'arrow_lower_right':            'â†˜ï¸'
	'arrow_lower_left':             'â†™ï¸'
	'arrow_upper_left':             'â†–ï¸'
	'arrows_counterclockwise':      'ðŸ”„'
	'leftwards_arrow_with_hook':    'â†©ï¸'
	'arrow_right_hook':             'â†ªï¸'
	'ten':                          'ðŸ”Ÿ'
	'copyright':                    'Â©ï¸'
	'registered':                   'Â®ï¸'
	'tm':                           'â„¢ï¸'
	// Flags (common)
	'checkered_flag':               'ðŸ'
	'white_flag':                   'ðŸ³ï¸'
	// Common aliases
	'+1':                           'ðŸ‘'
	'-1':                           'ðŸ‘Ž'
}
